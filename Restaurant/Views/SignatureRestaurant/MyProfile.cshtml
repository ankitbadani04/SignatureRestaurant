@using Restaurant.Models
@model Mcustregister

@{
    if (Session["Email"] != null)
    {
        ViewBag.CustSession = Session["Email"];
        ViewBag.Name = Session["Name"];

    }
    else
    {
        Response.Redirect("~/SignatureRestaurant/Login");
    }

}

@{
    ViewBag.Title = "MyProfile";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<!-- meta -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="arrowthemes, bakery, cafe, ristorante theme, coffee shop, cooking, dining, food, full screen, html template, menu, pizza, responsive, restaurant, template" />
<meta name="description" content="Gaucho is an exquisite food & restaurant HTML template with a unique concept. Gaucho comes bundled with astounding features like page preloader, pre-built pages, full page slider and much more" />
<meta name="author" content="arrowthemes">
<title>My Profile - Signature Restaurant & Green Food</title>

<!-- fav icon -->
<link href="~/Content/Customer/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
<link rel="apple-touch-icon" href="~/Content/Customer/images/apple-touch-icon.png">

<!-- css -->
<link rel="stylesheet" href="~/Content/Customer/css/plyr.css">
<link rel="stylesheet" href="~/Content/Customer/css/theme.css">
<link rel="stylesheet" href="~/Content/Customer/css/custom.css">

<!-- header-a -->
<div id="tm-header-a" class="tm-block-header-a uk-block uk-block-default tm-block-fullwidth tm-grid-collapse ">
    <div class="uk-container uk-container-center">
        <section class="tm-header-a uk-grid" data-uk-grid-match="{target:'> div > .uk-panel'}">

            <div class="uk-width-1-1">
                <div class="uk-panel uk-text-center uk-contrast tm-overlay-secondary tm-header-height">
                    <div class="tm-background-cover uk-cover-background uk-flex uk-flex-center uk-flex-middle" style="background-position: 50% 0px; background-image:url(/Content/Customer/images/background/bg-image-11.jpg)" data-uk-parallax="{bg: '-200'}">
                        <div class="uk-position-relative uk-container">

                            <div data-uk-parallax="{opacity: '1,0', y: '-50'}">

                                <div data-uk-scrollspy="{cls:'uk-animation-slide-top', delay:300}">
                                    <h1 class="uk-module-title-alt uk-margin-top">My Profile</h1>
                                </div>

                                <div data-uk-scrollspy="{cls:'uk-animation-slide-top', delay:800}">
                                    <h5 class="uk-sub-title-small">Got a minute? Talk to us</h5>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- main content -->
<div id="tm-main" class="tm-block-main uk-block uk-block-default">
    <div class="uk-container uk-container-center">
        <div class="tm-middle uk-grid" data-uk-grid-match="" data-uk-grid-margin="">
            <div class="tm-main uk-width-medium-1-1 uk-row-first" style="min-height: 568px;">
                <main id="tm-content" class="tm-content">
                    <article class="uk-article tm-article">
                        <div class="tm-article-wrapper">
                            <div class="tm-article-content uk-margin-large-bottom uk-margin-top-remove">
                                <div class="tm-article">
                                    <!-- contact form -->
                                    <div class="contact">                                      
                                        <div class="uk-grid" data-uk-grid-margin="">
                                            <div class="uk-width-medium-1-2 uk-row-first">

                                                @if (ViewBag.ErrorMsg != null)
                                                {
                                                    if (ViewBag.ErrorMsg == "Exist")
                                                    {
                                                        <div class="uk-alert uk-alert-danger" data-uk-alert="">
                                                            <a href="#" class="uk-alert-close uk-close"></a>
                                                            <p>Email and Contact Already Exists.!</p>
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <div class="uk-alert uk-alert-success" data-uk-alert="">
                                                            <a href="#" class="uk-alert-close uk-close"></a>
                                                            <p>Your profile Successfully updated. After logout changes profile.</p>
                                                        </div>
                                                    }

                                                }

                                                @using (Html.BeginForm("UpdateProfile", "SignatureRestaurant", FormMethod.Post, new { @class = "uk-form uk-form-stacked", @id = "frmtype", @role = "form", enctype = "multipart/form-data" }))
                                                {
                                                    @Html.HiddenFor(M => M.CustomerID)

                                                    <!-- name field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="name" data-uk-tooltip="" title="<strong>Name</strong><br />Your name.">Name</label>
                                                        <div class="uk-form-controls">
                                                            @Html.TextBoxFor(M => M.Name, new { @type = "text", @class = "uk-width-1-1", @required = "required" })
                                                        </div>
                                                    </div>

                                                    <!-- contact field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="Contact" data-uk-tooltip="" title="<strong>Contact</strong><br /> Enter Contact.">Contact</label>
                                                        <div class="uk-form-controls">
                                                            @Html.TextBoxFor(M => M.Contact, new { @type = "text", @id = "Contact", @class = "uk-width-1-1", @maxlength = "10" })

                                                        </div>
                                                    </div>

                                                    <!-- email field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="email" data-uk-tooltip="" title="<strong>Email</strong><br />Email Address for contact.">Email</label>
                                                        <div class="uk-form-controls">
                                                            @Html.TextBoxFor(M => M.Email, new { @type = "email", @class = "uk-width-1-1" })
                                                        </div>
                                                    </div>

                                                    <!-- submit button -->
                                                    <div class="form-actions" style="text-align:right;">
                                                        <button id="btnsave" class="uk-button uk-button-primary" type="submit">Save</button>
                                                    </div>
                                                }
                                            </div>

                                            <div class="uk-width-medium-1-2">

                                                @if (ViewBag.errormsgpass != null)
                                                {
                                                    if (ViewBag.errormsgpass == "InvalidOldPass")
                                                    {
                                                        <div class="uk-alert uk-alert-danger" data-uk-alert="">
                                                            <a href="#" class="uk-alert-close uk-close"></a>
                                                            <p>Please Check your Old Password.!</p>
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                        <div class="uk-alert uk-alert-success" data-uk-alert="">
                                                            <a href="#" class="uk-alert-close uk-close"></a>
                                                            <p>Password Successfully updated.</p>
                                                        </div>
                                                    }

                                                }

                                                @using (Html.BeginForm("ChangePassword", "SignatureRestaurant", FormMethod.Post, new { @class = "uk-form uk-form-stacked", @id = "frmtype1", @role = "form", enctype = "multipart/form-data" }))
                                                {

                                                    <!-- Old Password field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="Old Password" data-uk-tooltip="" title="<strong>Old Password</strong><br /> Enter Password.">Old Password</label>
                                                        <div class="uk-form-controls">
                                                            <input type="text" id="oldpassword" name="oldpassword" placeholder="Old Password" class="uk-width-1-1">
                                                        </div>
                                                    </div>

                                                    <!-- New Password field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="New Password" data-uk-tooltip="" title="<strong>Password</strong><br /> Enter New Password.">New Password</label>
                                                        <div class="uk-form-controls">
                                                            <input type="text" id="newpassword" name="newpassword" placeholder="New Password" class="uk-width-1-1">
                                                        </div>
                                                    </div>

                                                    <!-- Conf Password field -->
                                                    <div class="uk-form-row uk-margin-bottom">
                                                        <label for="Confirm Password" data-uk-tooltip="" title="<strong>Confirm Password</strong><br /> Enter Confirm Password.">Confirm Password</label>
                                                        <div class="uk-form-controls">
                                                            <input type="text" id="comfpassword" name="comfpassword" placeholder="Confirm Password" class="uk-width-1-1">
                                                        </div>
                                                    </div>

                                                    <!-- submit button -->
                                                    <div class="form-actions" style="text-align:right;">
                                                        <button id="btnchangepwd" class="uk-button uk-button-primary" type="submit">Save Change</button>
                                                    </div>
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                </main>
            </div>



            <!-- sidebar-b -->

        </div>
    </div>
</div>


<!-- js -->
<script src="~/Content/Customer/js/jquery/jquery.min.js" type="text/javascript"></script>

<!-- uikit -->
<script src="~/Content/Customer/vendor/uikit/js/uikit.min.js" type="text/javascript"></script>

<script src="~/Content/Customer/vendor/uikit/js/components/accordion.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/autocomplete.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/datepicker.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/grid.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/lightbox.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/parallax.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/slider.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/slideset.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/slideshow.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/sticky.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/timepicker.min.js" type="text/javascript"></script>
<script src="~/Content/Customer/vendor/uikit/js/components/tooltip.min.js" type="text/javascript"></script>

<!-- theme -->
<script src="~/Content/Customer/js/theme.js" type="text/javascript"></script>

<!-- plyr -->
<script src="~/Content/Customer/js/plyr.js" type="text/javascript"></script>

<!-- add active menu -->
<script>
    $(function () {
        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                vars[key] = value;
            });
            return vars;
        }

        var current_page = "indexa54e.html?page=" + getUrlVars()["page"];
        $('.tm-nav li a').each(function () {
            var link_page = this.href.substring(this.href.lastIndexOf('https://demo.arrowthemes.com/') + 1);
            var parent = $(this).parent();
            if (current_page == link_page) {
                parent.addClass('uk-active').closest('.uk-navbar-nav > li').addClass('uk-active');
                parent.closest('li.uk-parent').addClass('uk-active');
            }
        });
    })
</script>

<script>
    // demo scripts
    (function ($) { $(document).on('ready', function () { var config = $("html").data("config") || { style: "default" }; $('img[src*="demo/default"]').each(function () { var e = new Image, c = this.src.replace("demo/default", "demo/" + config.style), a = this; e.onload = function () { a.src = c }, e.src = c }), setTimeout(function () { $(".uk-cover-background").each(function () { var e = new Image, c = $(this).css("background-image").replace("demo/default", "demo/" + config.style), a = $(this); e.onload = function () { a.css("background-image", c) }, e.src = c.replace(/url\(\"?(.+?)\"?\)/i, "$1") }) }, 20); }); })(jQuery);
</script>

<script src="~/Content/validation/jquery.validate.min.js"></script>
<script src="~/Content/validation/additional-methods.min.js"></script>
<script>
    $(document).ready(function () {

        $("#frmtype").validate({

            rules:
            {
                Name: {
                    required: true,

                },
                Contact: {
                    required: true,
                    minlength: 10
                },
                Email: {
                    required: true,
                    email: true
                },
            },
            messages:
            {
                Name: {
                    required: "Please Enter Name.",

                },
                Contact: {
                    required: "Please Enter Contact Number.",
                    number: "Please Enter a Valid Contact Number.",
                    minlength: "Your Contact must be at 10 Characters Long.",
                    maxlength: "Please Enter no more than 10 Characters."
                },

                Email: {
                    required: "Please Enter Email Address.",
                    email: "Please Enter a Valid Email Address."
                },

            }
        });

        $("#Contact").keypress(function (e) {

            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                $("#errmsg").html("Input Only 0-9 Number").show().fadeOut("slow");
                return false;
            }
        });

        $("#btnsave").on("click", function () {
            if (!$("#frmtype").valid()) {
                return false;
            }
        });
    });

</script>

<script>
    $(document).ready(function () {

        $("#frmtype1").validate({

            rules:
            {
                oldpassword: {
                    required: true,
                    minlength: 5
                },
                newpassword: {
                    required: true,
                    minlength: 5
                },
                comfpassword: {
                    required: true,
                    minlength: 5,
                    equalTo: "#newpassword"
                }
            },
            messages: {

                oldpassword: {
                    required: "Please Enter Old Password.",
                    minlength: "Your Password must be at least 5 Characters Long."
                },
                newpassword: {
                    required: "Please Enter New Password.",
                    minlength: "Your Password must be at least 5 Characters Long."
                },
                comfpassword: {
                    required: "Please Enter Confirm Password.",
                    minlength: "Your Password must be at least 5 Characters Long.",
                    equalTo: "Confirm Password does not Match to New Password"
                }
            }

        });

        $("#btnchangepwd").on("click", function () {
            if (!$("#frmtype1").valid()) {
                return false;
            }
        });
    });

</script>